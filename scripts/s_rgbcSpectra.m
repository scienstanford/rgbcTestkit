%% s_rgbcSpectra
% Sets rgbc spectra based on given information.

%% From Excel spreadsheet "1.4um RGBC QE"

wave = (300:10:1090)';
qeData = zeros(80, 4);
qeData(:, 1) = [0	0.002502609	0.004130925	0.013437615	0.022608649	0.084531784	0.10533698	0.104385338	0.114335482	0.110204242	0.08935315	0.071004596	0.056552555	0.048320472	0.043958684	0.043108929	0.038748199	0.036176462	0.038402444	0.037546064	0.038695139	0.037206653	0.045932816	0.055564696	0.043787327	0.039852218	0.043691453	0.052045168	0.164717269	0.480897448	0.505711698	0.488089724	0.452364372	0.414105412	0.416484191	0.388233864	0.367177873	0.355402663	0.316580328	0.278701507	0.263865928	0.242491934	0.234802367	0.238815588	0.247624237	0.25815768	0.242967184	0.237961758	0.217615909	0.191976466	0.19392144	0.178010723	0.174183285	0.165398179	0.171431078	0.158531899	0.162427608	0.169308889	0.143379248	0.142958363	0.140571889	0.108209555	0.108569206	0.120209317	0.079239331	0.093669094	0.085492253	0.070102288	0.062717332	0.054436856	0.048595878	0.049292522	0.032287343	0.037224675	0.029091542	0.02301691	0.019050681	0.017847852	0.015404081	0.013426134 ];
qeData(:, 2) = [0	0.002056697	0.004906222	0.009737177	0.018931462	0.02138406	0.023453129	0.027785466	0.033834356	0.042646525	0.048938664	0.057838885	0.070813608	0.070611373	0.086267852	0.134748935	0.131084323	0.137459086	0.251290398	0.473738724	0.565143155	0.56727439	0.589734796	0.621276953	0.568709203	0.527062317	0.483363057	0.438771673	0.386415699	0.325719739	0.240592932	0.170609379	0.114094406	0.089064248	0.084289925	0.079472926	0.083148955	0.092721294	0.098279349	0.103459752	0.11756297	0.115067462	0.116674785	0.11681386	0.121508071	0.135779574	0.142950908	0.157998193	0.162783401	0.152320119	0.16421372	0.156635756	0.159065132	0.153982699	0.164288604	0.151161064	0.158246145	0.16614108	0.14243839	0.142133333	0.138987286	0.106437213	0.107202563	0.118683514	0.077991555	0.092518302	0.08496292	0.068774755	0.062260108	0.053931314	0.048160676	0.048361192	0.031575305	0.035705948	0.027568283	0.021741199	0.017689079	0.016303833	0.014235713	0.012276251 ];
qeData(:, 3) = [0	0.002388675	0.001305133	0.001345501	0.003458134	0.004680746	0.011262532	0.035146857	0.105479617	0.250119034	0.376862861	0.469539616	0.521558471	0.547115888	0.603445386	0.594269688	0.56464905	0.552333824	0.497227357	0.408135237	0.329755281	0.233255867	0.159302918	0.113973379	0.085469391	0.069184145	0.05585171	0.048532623	0.047898208	0.053560427	0.056826957	0.061991584	0.063435472	0.065781437	0.074157708	0.080050189	0.089809329	0.101775043	0.10054755	0.094670692	0.098681473	0.088505741	0.088175508	0.086256815	0.089995795	0.097998252	0.094875243	0.106496317	0.118226873	0.13392466	0.202410493	0.195178445	0.184404822	0.174578264	0.187948787	0.159219292	0.166116302	0.186378295	0.15015642	0.146906624	0.148754874	0.117887013	0.112780887	0.122787703	0.081985351	0.096512986	0.087576741	0.070225425	0.063495523	0.055077111	0.04929407	0.04863984	0.031581362	0.035278725	0.026655892	0.021084781	0.016959869	0.015244706	0.013174518	0.011447327 ];
qeData(:, 4) = [0	0.000243091	0.002167239	0.017039128	0.071587088	0.143876185	0.218671241	0.307350587	0.437732569	0.581903692	0.628973073	0.750506669	0.74603367	0.799210535	0.804012097	0.776794316	0.794190778	0.784683182	0.752677786	0.760457709	0.772522616	0.7550926	0.722684008	0.704237142	0.690576884	0.709141856	0.704434254	0.655526401	0.607562274	0.599083157	0.566964457	0.545050068	0.489993714	0.450414377	0.455065992	0.424644806	0.407266701	0.398030276	0.37584409	0.337268339	0.32004454	0.278965695	0.272574685	0.269337769	0.275364055	0.283807834	0.261101079	0.25997344	0.23357142	0.201467083	0.204921108	0.187283738	0.184270028	0.179938758	0.190175357	0.16414746	0.175367662	0.190155048	0.152044948	0.150527386	0.150595541	0.121669838	0.115201153	0.126098798	0.08545776	0.102155454	0.091844154	0.072739424	0.064678626	0.056687128	0.050584214	0.050389676	0.0327245	0.0364798	0.028347189	0.022517547	0.019129171	0.018241589	0.015692824	0.013685644 ];


%% Save data.

comment = 'Omnivision RGBC sensor';

fName = fullfile(rgbcRootPath,'data','sensor','rgbcSpectra');
% ieSaveSpectralFile(wave,qeData/max(qeData(:)),comment,fName);
ieSaveSpectralFile(wave,qeData,comment,fName);
%%

fName = fullfile(rgbcRootPath,'data','sensor','rgbcSpectra.mat');

wave = 400:5:700;
d = ieReadSpectra(fName,wave);

vcNewGraphWin;
h = plot(wave,d); set(h(1), 'Color', 'r'); set(h(2), 'Color', [0, .6, 0]);
xlabel('wavelength (nm)'); 
set(h(3), 'Color', 'b'); set(h(4),'Color','k');
title('Spectral response curves for RGBC pixels.');
legend('R', 'G', 'B', 'C');
